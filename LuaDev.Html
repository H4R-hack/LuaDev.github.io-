<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Anime File Obfuscator — LuaDev Header</title>
<style>
  :root{
    --bg:#0b1020; --card:#0f1724; --accent:#ff7bd6; --muted:#9aa4bf;
  }
  html,body{height:100%; margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{
    background:
      radial-gradient(1200px 600px at 10% 20%, rgba(255,123,214,0.08), transparent 10%),
      radial-gradient(900px 400px at 90% 80%, rgba(112,217,255,0.04), transparent 10%),
      var(--bg);
    color:#e6eef8;
    display:flex; align-items:center; justify-content:center;
    padding:28px;
  }
  .app{width:100%; max-width:1080px;}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
  .logo{
    width:80px;height:80px;border-radius:12px; background:linear-gradient(135deg,#ff8acb,#7bd3ff);
    display:flex;align-items:center;justify-content:center; font-weight:700;color:#082034; font-size:20px;
    box-shadow:0 6px 24px rgba(123,66,153,0.18);
  }
  h1{margin:0;font-size:20px}
  p.lead{margin:0;color:var(--muted);font-size:13px}
  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:12px; padding:18px; box-shadow: 0 6px 30px rgba(2,6,23,0.6);}
  .grid{display:grid;grid-template-columns:1fr 360px; gap:16px}
  textarea{width:100%; min-height:320px; resize:vertical; border-radius:8px; border:1px solid rgba(255,255,255,0.04); padding:12px; background:rgba(5,8,15,0.6); color:#e8f1ff; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:13px}
  .controls{display:flex;flex-direction:column;gap:10px}
  label{font-size:13px; color:var(--muted)}
  select,input[type=text]{width:100%; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit}
  .row{display:flex;gap:8px}
  .btn{
    display:inline-block;padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:600;
    background:linear-gradient(90deg,var(--accent),#7bd3ff); color:#082034;
    box-shadow:0 8px 30px rgba(123,66,153,0.12)
  }
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:12px;color:var(--muted)}
  .switch{display:flex;align-items:center;gap:8px}
  .output-preview{background:rgba(2,6,15,0.6); padding:10px; border-radius:8px; min-height:160px; font-family: ui-monospace, monospace; font-size:12px; overflow:auto; border:1px solid rgba(255,255,255,0.03)}
  .footer{margin-top:12px;color:var(--muted);font-size:12px}
  .file-row{display:flex;gap:8px;align-items:center}
  .file-row input[type=file]{display:none}
  .chip{background:rgba(255,255,255,0.03); padding:6px 8px;border-radius:999px;font-size:12px}
  /* responsive */
  @media (max-width:980px){ .grid{grid-template-columns:1fr} .logo{width:64px;height:64px} }
</style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">ANIME</div>
      <div>
        <h1>Anime File Obfuscator</h1>
        <p class="lead">Create obfuscated/encoded files (Base64, XOR, ROT13, Reverse, Hex) — includes optional LuaDev header line.</p>
      </div>
    </header>

    <div class="panel grid">
      <div>
        <label for="source">Source text / paste your file content</label>
        <textarea id="source" placeholder="Paste your Lua code, text, or any document here..."></textarea>

        <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
          <div class="file-row">
            <label class="btn" for="fileInput">Upload file</label>
            <input id="fileInput" type="file" />
            <div class="chip" id="filename">No file</div>
          </div>

          <button class="btn" id="clearBtn" style="background:rgba(255,255,255,0.06); color:var(--muted)">Clear</button>
          <button class="btn" id="exampleBtn" style="background:rgba(255,255,255,0.06); color:var(--muted)">Insert example</button>
        </div>

        <div style="margin-top:12px; display:flex; gap:8px; align-items:center;">
          <label class="small">Preview</label>
          <div class="muted" style="margin-left:8px">Shows first 8KB</div>
        </div>
        <div class="output-preview" id="preview">No output yet</div>
      </div>

      <aside>
        <div class="controls">
          <label>Output format</label>
          <select id="format">
            <option value="lua">Lua (.lua) — adds Lua comment header by default</option>
            <option value="txt">Text (.txt)</option>
            <option value="bin">Binary-like (.bin)</option>
          </select>

          <label>Obfuscation method</label>
          <select id="method">
            <option value="base64">Base64</option>
            <option value="xor">XOR with passphrase (hex output)</option>
            <option value="rot13">ROT13 (letters only)</option>
            <option value="reverse">Reverse string</option>
            <option value="hex">Hex encoding (utf-8 bytes)</option>
            <option value="wrap">Wrap: header + Base64</option>
          </select>

          <label>Passphrase (for XOR)</label>
          <input id="pass" type="text" placeholder="Enter passphrase (for XOR)">

          <div class="switch">
            <input type="checkbox" id="addHeader" checked />
            <label for="addHeader">Include LuaDev protection header line</label>
          </div>
          <div class="small muted">Header text: <code>-- This file was protected using LuaDev Obfuscator v1 [https://discord.gg/Kx6bZErfSh]</code></div>

          <div style="display:flex;gap:8px;margin-top:6px">
            <button class="btn" id="encodeBtn">Encode / Obfuscate</button>
            <button class="btn" id="downloadBtn" style="background:rgba(255,255,255,0.06); color:var(--muted)">Download</button>
          </div>

          <div style="margin-top:8px">
            <label class="small">Output size</label>
            <div id="outSize" class="muted">—</div>
          </div>

          <div class="footer">
            <strong>Ethical use only.</strong> This tool obfuscates text. Do not use it to conceal wrongdoing or malware. Use for protecting scripts, privacy, or learning.
          </div>
        </div>
      </aside>
    </div>
  </div>

<script>
/* --- Utilities --- */
function utf8ToBytes(str){
  return new TextEncoder().encode(str);
}
function bytesToHex(bytes){
  return Array.from(bytes).map(b => b.toString(16).padStart(2,'0')).join('');
}
function hexToBytes(hex){
  const out = new Uint8Array(hex.length/2);
  for(let i=0;i<out.length;i++) out[i] = parseInt(hex.substr(i*2,2),16);
  return out;
}
function bytesToBase64(bytes){
  // base64 from bytes
  let binary = '';
  const chunk = 0x8000;
  for (let i = 0; i < bytes.length; i += chunk) {
    binary += String.fromCharCode.apply(null, bytes.subarray(i, i + chunk));
  }
  return btoa(binary);
}
function base64ToBytes(b64){
  const bin = atob(b64);
  const bytes = new Uint8Array(bin.length);
  for(let i=0;i<bin.length;i++) bytes[i]=bin.charCodeAt(i);
  return bytes;
}

/* --- Methods --- */
function method_base64(input){
  return bytesToBase64(utf8ToBytes(input));
}
function method_hex(input){
  return bytesToHex(utf8ToBytes(input));
}
function method_reverse(input){
  return input.split('').reverse().join('');
}
function method_rot13(input){
  return input.replace(/[a-zA-Z]/g, function(c){
    const base = c <= 'Z' ? 65 : 97;
    return String.fromCharCode((c.charCodeAt(0)-base+13)%26 + base);
  });
}
function method_xor(input, passphrase){
  if(!passphrase) passphrase = 'default';
  const data = utf8ToBytes(input);
  const key = utf8ToBytes(passphrase);
  const out = new Uint8Array(data.length);
  for(let i=0;i<data.length;i++){
    out[i] = data[i] ^ key[i % key.length];
  }
  return bytesToHex(out); // hex output for readability
}
function method_wrap(input){
  const header = "-- Wrapped using Anime File Obfuscator\n";
  const b64 = method_base64(input);
  return header + b64;
}

/* --- DOM --- */
const src = document.getElementById('source');
const fileInput = document.getElementById('fileInput');
const filename = document.getElementById('filename');
const preview = document.getElementById('preview');
const encodeBtn = document.getElementById('encodeBtn');
const downloadBtn = document.getElementById('downloadBtn');
const format = document.getElementById('format');
const method = document.getElementById('method');
const addHeader = document.getElementById('addHeader');
const pass = document.getElementById('pass');
const outSize = document.getElementById('outSize');
const clearBtn = document.getElementById('clearBtn');
const exampleBtn = document.getElementById('exampleBtn');

let lastOutput = ''; // stored output
let lastFilename = 'obfuscated.txt';

fileInput.addEventListener('change', async (e)=>{
  const f = e.target.files[0];
  if(!f) return;
  filename.textContent = f.name;
  const text = await f.text();
  src.value = text;
});

clearBtn.addEventListener('click', ()=>{ src.value=''; preview.textContent='No output yet'; filename.textContent='No file'; lastOutput=''; outSize.textContent='—'; });

exampleBtn.addEventListener('click', ()=>{
  src.value = `-- Example Lua script
local function greet(name)
  print("Hello, "..tostring(name))
end

greet("Friend")`;
});

/* --- Combine header and output --- */
function makeHeaderLine(forLua){
  // exact header line from user
  const headerLine = "-- This file was protected using LuaDev Obfuscator v1 [https://discord.gg/Kx6bZErfSh]";
  if(forLua) return headerLine + "\\n";
  return headerLine + "\\n";
}

function encodeContent(){
  const input = src.value || '';
  const m = method.value;
  let out = '';
  if(input.length === 0){
    preview.textContent = 'Source is empty';
    return;
  }

  try{
    if(m === 'base64') out = method_base64(input);
    else if(m === 'hex') out = method_hex(input);
    else if(m === 'reverse') out = method_reverse(input);
    else if(m === 'rot13') out = method_rot13(input);
    else if(m === 'xor') out = method_xor(input, pass.value || 'pass');
    else if(m === 'wrap') out = method_wrap(input);
    else out = input;
  }catch(err){
    out = 'Error: ' + String(err);
  }

  // possibly add header
  const forLua = (format.value === 'lua');
  if(addHeader.checked){
    // If method produced binary-like output (hex/base64), comment may be applied as needed
    const header = makeHeaderLine(forLua);
    if(forLua){
      // Lua comment header
      // If output is binary-looking (hex/base64) we just put header at top and then the payload
      out = header + out;
    } else {
      out = header + out;
    }
  }

  // prepare preview (limit to 8KB)
  const PREVIEW_LIMIT = 8*1024;
  const pv = out.length > PREVIEW_LIMIT ? out.slice(0,PREVIEW_LIMIT) + "\n\n... (truncated preview)" : out;
  preview.textContent = pv;
  lastOutput = out;
  // size
  outSize.textContent = out.length.toLocaleString() + ' bytes (text)';
  // determine filename
  const ext = format.value === 'lua' ? 'lua' : (format.value === 'txt' ? 'txt' : 'bin');
  lastFilename = `obfuscated.${ext}`;
}

/* --- Download --- */
function downloadOutput(){
  if(!lastOutput){
    alert('No output to download. Click "Encode / Obfuscate" first.');
    return;
  }
  const blob = new Blob([lastOutput], {type:'application/octet-stream'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = lastFilename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
}

/* --- Events --- */
encodeBtn.addEventListener('click', encodeContent);
downloadBtn.addEventListener('click', downloadOutput);

// allow encoding on change
method.addEventListener('change', ()=>{ /* no auto action */ });
format.addEventListener('change', ()=>{ /* no auto action */ });

/* Helpful: auto-encode when typing stops */
let typingTimer = null;
src.addEventListener('input', ()=>{
  clearTimeout(typingTimer);
  typingTimer = setTimeout(()=>{ /* don't auto-run, leave to user */ }, 600);
});

/* Accessibility: keyboard shortcuts */
document.addEventListener('keydown', (e)=>{
  if((e.ctrlKey||e.metaKey) && e.key.toLowerCase() === 'e'){ e.preventDefault(); encodeContent(); }
  if((e.ctrlKey||e.metaKey) && e.key.toLowerCase() === 's'){ e.preventDefault(); downloadOutput(); }
});

</script>
</body>
</html>
